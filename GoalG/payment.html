<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Goal Genius - Payment">
    <title>Goal Genius - Payment</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" href="images/favicon.ico">
    <style>
        /* Additional payment-specific styles */
        .payment-container {
            max-width: 600px;
            margin: 40px auto;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .payment-header {
            background: #f5f5f5;
            padding: 20px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .payment-header .close-btn {
            cursor: pointer;
            font-size: 24px;
            color: #333;
        }
        
        .payment-methods {
            display: flex;
        }
        
        .payment-sidebar {
            width: 200px;
            background: #f9f9f9;
            padding: 20px;
        }
        
        .payment-method {
            display: flex;
            align-items: center;
            padding: 12px 0;
            cursor: pointer;
            border-bottom: 1px solid #eee;
        }
        
        .payment-method.active {
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .payment-method img {
            width: 24px;
            margin-right: 10px;
        }
        
        .payment-content {
            flex: 1;
            padding: 30px;
        }
        
        .payment-form-group {
            margin-bottom: 20px;
        }
        
        .payment-form-group label {
            display: block;
            margin-bottom: 8px;
            color: #666;
            font-size: 14px;
        }
        
        .payment-form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            box-sizing: border-box;
        }
        
        .payment-form-row {
            display: flex;
            gap: 15px;
        }
        
        .payment-form-row .payment-form-group {
            flex: 1;
        }
        
        .secure-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
            color: #666;
            font-size: 14px;
            border-top: 1px solid #eee;
        }
        
        .secure-badge img {
            height: 20px;
            margin-right: 10px;
        }
        
        .pay-button {
            background: #4cd964;
            color: white;
            border: none;
            padding: 14px;
            border-radius: 4px;
            font-size: 16px;
            font-weight: bold;
            width: 100%;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 10px;
        }
        
        .pay-button:hover {
            background: #46c65c;
        }
        
        .saved-payment-option {
            text-align: center;
            margin-top: 15px;
            font-size: 14px;
            color: #0066cc;
            cursor: pointer;
        }
        
        .checkbox-container {
            display: flex;
            align-items: center;
            margin-top: 20px;
        }
        
        .checkbox-container input {
            margin-right: 10px;
        }
        
        .payment-heading {
            margin-bottom: 20px;
        }
        
        .payment-email {
            color: #666;
            margin-bottom: 5px;
        }
        
        .payment-amount {
            color: #333;
            font-weight: bold;
        }
        
        .new-tag {
            background: #ff3b30;
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 6px;
            text-transform: uppercase;
        }
        
        /* Method-specific styling */
        .payment-method-content {
            display: none;
        }
        
        .payment-method-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <a href="index.html">
                    <img src="images/logo.png" alt="Goal Genius Logo">
                    <span>Goal Genius</span>
                </a>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">HOME</a></li>
                    <li><a href="about.html">ABOUT</a></li>
                    <li><a href="predictions.html">PREDICTIONS</a></li>
                </ul>
            </nav>
            <div class="auth-button" id="auth-button-container">
                <a href="signin.html" class="sign-in-btn">SIGN IN</a>
            </div>
        </div>
    </header>

    <main>
        <div class="payment-container">
            <div class="payment-header">
                <h2>PAY WITH</h2>
                <div class="close-btn" onclick="window.history.back()">&times;</div>
            </div>
            
            <div class="payment-methods">
                <div class="payment-sidebar">
                    <div class="payment-method active" data-method="card">
                        <img src="images/card-icon.png" alt="Card">
                        Card
                    </div>
                    <div class="payment-method" data-method="mobile">
                        <img src="images/mobile-money-icon.png" alt="Mobile Money">
                        Mobile Money
                    </div>
                </div>
                
                <div class="payment-content">
                    <div class="payment-email" id="user-email">email@example.com</div>
                    <div class="payment-amount">Pay <span id="payment-amount">₵ 50</span></div>
                    
                    <!-- Card Payment Form -->
                    <div class="payment-method-content active" id="card-payment">
                        <div class="payment-heading">Enter your card details to pay</div>
                        
                        <div class="payment-form-group">
                            <label for="card-number">CARD NUMBER</label>
                            <input type="text" id="card-number" placeholder="0000 0000 0000 0000">
                        </div>
                        
                        <div class="payment-form-row">
                            <div class="payment-form-group">
                                <label for="card-expiry">CARD EXPIRY</label>
                                <input type="text" id="card-expiry" placeholder="MM / YY">
                            </div>
                            
                            <div class="payment-form-group">
                                <label for="card-cvv">CVV <span class="help-icon">?</span></label>
                                <input type="text" id="card-cvv" placeholder="123">
                            </div>
                        </div>
                        
                        <div class="checkbox-container">
                            <input type="checkbox" id="save-card">
                            <label for="save-card">Save this card for faster checkouts <span class="new-tag">NEW</span></label>
                        </div>
                        
                        <button class="pay-button" id="card-pay-button">Pay <span id="card-amount">₵ 50</span></button>
                        
                        <div class="saved-payment-option">Use a saved card</div>
                    </div>
                    
                    <!-- Mobile Money Payment Form -->
                    <div class="payment-method-content" id="mobile-payment">
                        <div class="payment-heading">Enter your mobile money details</div>
                        
                        <div class="payment-form-group">
                            <label for="mobile-provider">PROVIDER</label>
                            <select id="mobile-provider">
                                <option value="mtn">MTN Mobile Money</option>
                                <option value="vodafone">Vodafone Cash</option>
                                <option value="airteltigo">AirtelTigo Money</option>
                            </select>
                        </div>
                        
                        <div class="payment-form-group">
                            <label for="mobile-number">YOUR PHONE NUMBER</label>
                            <input type="text" id="mobile-number" placeholder="0XX XXX XXXX">
                        </div>
                        
                        <div class="payment-info" style="margin-top: 15px; padding: 10px; background-color: #f9f9f9; border-radius: 5px;">
                            <p style="margin: 0; color: #666; font-size: 14px;">Payment will be sent to: <strong>0257082838</strong> (Manager's Account)</p>
                        </div>
                        
                        <button class="pay-button" id="mobile-pay-button">Pay <span id="mobile-amount">₵ 50</span></button>
                    </div>
                </div>
            </div>
            
            <div class="secure-badge">
                <img src="images/lock-icon.png" alt="Secure">
                Secured by paystack
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="images/logo.png" alt="Goal Genius Logo">
                    <p>Goal Genius</p>
                </div>
                <div class="footer-links">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="predictions.html">Predictions</a></li>
                        <li><a href="vip.html">VIP</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-legal">
                    <h3>Legal</h3>
                    <ul>
                        <li><a href="terms.html">Terms & Conditions</a></li>
                        <li><a href="privacy.html">Privacy Policy</a></li>
                        <li><a href="disclaimer.html">Disclaimer</a></li>
                    </ul>
                </div>
                <div class="footer-newsletter">
                    <h3>Newsletter</h3>
                    <p>Subscribe to get the latest predictions and offers</p>
                    <form class="newsletter-form">
                        <input type="email" placeholder="Your email address">
                        <button type="submit">Subscribe</button>
                    </form>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Goal Genius. All Rights Reserved.</p>
                <p class="disclaimer">18+ | Gamble Responsibly</p>
            </div>
        </div>
    </footer>

    <script>
        // Check if user is logged in
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user token exists in localStorage
            const userToken = localStorage.getItem('userToken');
            const authButtonContainer = document.getElementById('auth-button-container');
            
            if (userToken) {
                // User is logged in, show dashboard button
                authButtonContainer.innerHTML = '<a href="dashboard.html" class="sign-in-btn">DASHBOARD</a>';
            } else {
                // User is not logged in, redirect to sign in page
                alert('Please sign in to make a payment');
                window.location.href = 'signin.html?redirect=payment&' + window.location.search.substring(1);
            }
        });

        // Get URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const plan = urlParams.get('plan');
        const location = urlParams.get('location');
        
        // Set payment amount based on plan
        let amount = "₵ 50"; // Default
        let numericAmount = 50; // For calculations
        
        if (plan) {
            switch(plan) {
                case 'daily':
                    amount = "₵ 50";
                    numericAmount = 50;
                    break;
                case 'weekly':
                    amount = "₵ 150";
                    numericAmount = 150;
                    break;
                case 'monthly':
                    amount = "₵ 300";
                    numericAmount = 300;
                    break;
                case 'daily-vvip':
                    amount = "₵ 100";
                    numericAmount = 100;
                    break;
                case 'weekly-vvip':
                    amount = "₵ 300";
                    numericAmount = 300;
                    break;
                case 'monthly-vvip':
                    amount = "₵ 600";
                    numericAmount = 600;
                    break;
            }
        }
        
        // Update amount display
        document.querySelectorAll('.payment-amount span, #card-amount, #mobile-amount').forEach(el => {
            el.textContent = amount;
        });
        
        // Get user email from localStorage
        const userEmail = localStorage.getItem('userEmail');
        
        if (userEmail) {
            document.getElementById('user-email').textContent = userEmail;
        } else {
            // If no email is stored (shouldn't happen due to our authentication check)
            document.getElementById('user-email').textContent = "Please sign in again";
        }
        
        // Payment method switching
        const paymentMethods = document.querySelectorAll('.payment-method');
        const paymentContents = document.querySelectorAll('.payment-method-content');
        
        paymentMethods.forEach(method => {
            method.addEventListener('click', function() {
                // Remove active class from all methods
                paymentMethods.forEach(m => m.classList.remove('active'));
                paymentContents.forEach(c => c.classList.remove('active'));
                
                // Add active class to selected method
                this.classList.add('active');
                
                // Show selected payment form
                const methodName = this.getAttribute('data-method');
                document.getElementById(methodName + '-payment').classList.add('active');
            });
        });
        
        // Process payment
        document.getElementById('card-pay-button').addEventListener('click', function() {
            processPayment('card');
        });
        
        document.getElementById('mobile-pay-button').addEventListener('click', function() {
            processPayment('mobile');
        });
        
        function processPayment(method) {
            // In a real implementation, this would connect to a payment processor
            let message = '';
            let redirectDelay = 2000; // 2 seconds
            
            if (method === 'card') {
                const cardNumber = document.getElementById('card-number').value;
                const cardExpiry = document.getElementById('card-expiry').value;
                const cardCvv = document.getElementById('card-cvv').value;
                
                // Basic validation
                if (!cardNumber || !cardExpiry || !cardCvv) {
                    alert('Please fill in all card details');
                    return;
                }
                
                message = `Processing card payment of ${amount} for ${plan} plan.\n\nPayment will be credited to the manager's account.`;
            } else if (method === 'mobile') {
                const provider = document.getElementById('mobile-provider').value;
                const mobileNumber = document.getElementById('mobile-number').value;
                
                // Basic validation
                if (!mobileNumber) {
                    alert('Please enter your mobile money number');
                    return;
                }
                
                // Format provider name for display
                let providerName = "MTN Mobile Money";
                if (provider === 'vodafone') providerName = "Vodafone Cash";
                if (provider === 'airteltigo') providerName = "AirtelTigo Money";
                
                message = `Processing ${providerName} payment of ${amount} for ${plan} plan.\n\nYou will receive a prompt on your phone to complete the payment to 0257082838 (Manager's Account).\n\nOnce approved, you'll be redirected to your dashboard.`;
                
                // Mobile money typically takes longer to process
                redirectDelay = 6000; // 6 seconds
            }
            
            // Show payment processing message
            alert(message);
            
            // In a real implementation, we would handle the payment response here
            // For demo, we'll simulate a successful payment
            
            // Store plan info in localStorage
            const planInfo = {
                type: plan,
                amount: numericAmount,
                method: method,
                purchaseDate: new Date().toISOString(),
                expiryDate: calculateExpiryDate(plan)
            };
            
            localStorage.setItem('activePlan', JSON.stringify(planInfo));
            
            // Show success message
            setTimeout(() => {
                alert('Payment successful! You now have access to ' + plan.toUpperCase() + ' predictions.');
                // After successful payment, redirect to dashboard
                window.location.href = 'dashboard.html';
            }, redirectDelay);
        }
        
        // Calculate expiry date based on plan
        function calculateExpiryDate(plan) {
            const today = new Date();
            let expiryDate = new Date(today);
            
            if (plan.includes('daily')) {
                expiryDate.setDate(today.getDate() + 1);
            } else if (plan.includes('weekly')) {
                expiryDate.setDate(today.getDate() + 7);
            } else if (plan.includes('monthly')) {
                expiryDate.setMonth(today.getMonth() + 1);
            }
            
            return expiryDate.toISOString();
        }
    </script>
</body>
</html> 